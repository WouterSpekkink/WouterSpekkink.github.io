<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>QSqlTableModels, booleans and check boxes | Wouter A. H. Spekkink</title> <meta name="author" content="Wouter A. H. Spekkink"> <meta name="description" content="My personal website. "> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://wouterspekkink.github.io/blog/2018/qsltablemodels-booleans-and-check-boxes/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Wouter </span>A. H. Spekkink</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">QSqlTableModels, booleans and check boxes</h1> <p class="post-meta">January 19, 2018</p> <p class="post-tags"> <a href="/blog/2018"> <i class="fas fa-calendar fa-sm"></i> 2018 </a>   ·   <a href="/blog/tag/q-sopra"> <i class="fas fa-hashtag fa-sm"></i> Q-SoPrA</a>   <a href="/blog/tag/technical"> <i class="fas fa-hashtag fa-sm"></i> Technical</a>   <a href="/blog/tag/c"> <i class="fas fa-hashtag fa-sm"></i> C++</a>   <a href="/blog/tag/qt"> <i class="fas fa-hashtag fa-sm"></i> Qt</a>     ·   <a href="/blog/category/software"> <i class="fas fa-tag fa-sm"></i> Software</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="interfacing-with-sql-databases-with-qt5">Interfacing with sql databases with Qt5</h2> <p>This post is on an issue that I struggled with very recently, while working on Q-SoPrA. What I wanted to achieve was relatively simple: I wanted to have tables that fetch data from sql databases, and in which one column shows check boxes to set/unset a boolean variable. The screenshot below shows an example.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/table-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/table-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/table-1400.webp"></source> <img src="/assets/img/table.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> An example table. </div> <p>What you see in the screen shot is <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> widget that shows data that it fetches from a <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> that interfaces with a table of a <a href="https://sqlite.org/" rel="external nofollow noopener" target="_blank">sqlite</a> database. This post is about how to create the interactive check boxes shown in the right-most column. There are two main hurdles in getting the <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> widget to work with check boxes:</p> <ol> <li>Sqlite databases don’t actually support boolean variables. You can use an integer variable to ‘simulate’ a boolean variable by setting it to <code class="language-plaintext highlighter-rouge">0</code>(for <code class="language-plaintext highlighter-rouge">false</code>) or <code class="language-plaintext highlighter-rouge">1</code> (for <code class="language-plaintext highlighter-rouge">true</code>), but you will of course need to do a bit of extra work to make the <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> properly treat it as a boolean (or something that can be switched on or off) in read &amp; write operations. This can be done by sub-classing the <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a>, and re-implementing its <a href="http://doc.qt.io/qt-5/qsqltablemodel.html#flags" rel="external nofollow noopener" target="_blank">flags()</a>, <a href="http://doc.qt.io/qt-5/qsqltablemodel.html#data" rel="external nofollow noopener" target="_blank">data()</a> and <a href="http://doc.qt.io/qt-5/qsqltablemodel.html#setData" rel="external nofollow noopener" target="_blank">setData()</a> functions, as suggested <a href="http://www.qtcentre.org/threads/12008-QSqlTableModel-and-checkboxes-with-SQLite-database" rel="external nofollow noopener" target="_blank">here</a>.</li> <li>But if you do that, you’ll have a quite ugly looking table, since the check boxes are all left-aligned in their column, with no obvious way to change that. In this case, the only solution seems to be to use a <a href="http://doc.qt.io/qt-5/qstyleditemdelegate.html" rel="external nofollow noopener" target="_blank">QStyledItemDelegate</a> to handle the <code class="language-plaintext highlighter-rouge">paint()</code> function that determines how the column is visualised. A somewhat outdated example of how to do that is offered in the <a href="https://wiki.qt.io/Technical_FAQ#How_can_I_align_the_checkboxes_in_a_view.3F" rel="external nofollow noopener" target="_blank">Qt FAQ</a>.</li> </ol> <p>For good results in my use-case, where I want to have check boxes that (1) are able to handle a ‘pretend boolean’ variable (a boolean that is actually an integer) from a sqlite database, and (2) are not all aligned to the extreme left of their column, you have to combine the two solutions mentioned above. I haven’t really encountered a worked out example of this combination, which is why I decided to provide one in this post.</p> <p>In the below, I briefly outline how you could achieve a result like the one shown in the screenshot above.</p> <details> <summary>In case you are not familiar with Qt5...</summary> <blockquote> <a href="https://www.qt.io/" rel="external nofollow noopener" target="_blank">Qt5</a> is a popular library for C++ that can be used for the development of Graphical User Interfaces (GUIs). It also includes a module that allows for easy interfacing of your program with sql databases. I make heavy use of the Qt5 library for the development of Q-SoPrA, including the possibilities it offers for interfacing with <a href="https://sqlite.org/" rel="external nofollow noopener" target="_blank">sqlite</a> databases. Qt5 comes packed with a number of great <a href="https://doc.qt.io/qt-5.10/sql-programming.html" rel="external nofollow noopener" target="_blank">sql database classes</a>, such as <a href="https://doc.qt.io/qt-5.10/qsqldatabase.html" rel="external nofollow noopener" target="_blank">QSqlDatabase</a>, <a href="https://doc.qt.io/qt-5.10/qsqlquerymodel.html" rel="external nofollow noopener" target="_blank">QSqlQueryModel</a>, <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a>, <a href="https://doc.qt.io/qt-5.10/qsqlrelationaltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlRelationalTableModel</a>, and <a href="https://doc.qt.io/qt-5.10/qsqlquery.html" rel="external nofollow noopener" target="_blank">QSqlQuery</a>. <br><br>For the development of Q-SoPrA, I make use of most of all these classes, although often a sub-classed version of them in which I re-implemented some of their member functions. <br><br>I think a very common setup for interfacing with sql databases is to have a <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> (or <a href="https://doc.qt.io/qt-5.10/qsqlrelationaltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlRelationalTableModel</a>) that fetches data from a table in your sql database, a <a href="https://doc.qt.io/qt-5.10/qsortfilterproxymodel.html" rel="external nofollow noopener" target="_blank">QSortFilterProxyModel</a> that reads from the QSqlTableModel and acts as a 'filtering layer', and a <a href="https://doc.qt.io/qt-5.10/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> that reads from the filter and displays the results on the user's screen. This is also the kind of setup that I use for several widgets that I included in Q-SoPrA, although I typically subclass the QSqlTableModel / QSqlRelationalTableModel to change some of the ways in which the data is presented to the user (such as tool tip behaviour). </blockquote> </details> <p><br></p> <h2 id="an-assumption-about-your-pretend-boolean-variable">An assumption about your ‘pretend boolean’ variable</h2> <p>In the below I make one main assumption about your ‘pretend boolean’ variable, which is that this variable is stored in one of the tables of your sql database as an integer, and that you programmatically set this integer to <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code> whenever necessary. I tend to use the <a href="https://doc.qt.io/qt-5.10/qsqlquery.html" rel="external nofollow noopener" target="_blank">QSqlQuery</a> class for this, but as Doug Forester pointed out in the comment section below, this is a bit inefficient. Instead, it is enough to subclass the <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> and re-implement some of its functions as discussed further below.</p> <p>Before showing how this works, I should add that in the particular use case discussed here, the pretend boolean is stored in a particular column of the sql table that my <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> interfaces with. In the code snippets below you will regularly see a conditional that checks if the current column index is <code class="language-plaintext highlighter-rouge">7</code>, because that is the column that holds the ‘pretend boolean’ in my specific example. You would of course need to adapt this column index to your own specific use case.</p> <h2 id="sub-classing-qsqltablemodel">Sub-classing QSqlTableModel</h2> <p>If we want user interaction with our ‘pretend boolean’ variable to be handled by a check box, we need to sub-class the <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> that interfaces between the sql table and the <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> that visualises the data for the user. More specifically, we need to re-implement the <code class="language-plaintext highlighter-rouge">flags()</code>, <code class="language-plaintext highlighter-rouge">data()</code> and <code class="language-plaintext highlighter-rouge">setData()</code> member functions, and make our ‘pretend boolean’ (an integer set to <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code>) behave as an item that can be checked and unchecked (I believe it was <a href="http://www.qtcentre.org/threads/12008-QSqlTableModel-and-checkboxes-with-SQLite-database" rel="external nofollow noopener" target="_blank">this discussion</a> that led me to this insight). The <a href="http://doc.qt.io/qt-5/qsqltablemodel.html#flags" rel="external nofollow noopener" target="_blank">flags()</a> function basically determines how items recorded in the <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> can be manipulated (see <a href="http://doc.qt.io/qt-5/qt.html#ItemFlag-enum" rel="external nofollow noopener" target="_blank">this list</a> of possible flags). We want to re-implement this function to make sure that items that correspond to our ‘pretend boolean’ can be checked or unchecked by the user. This can be achieved quite easily:</p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cm">/* 
   To make sure that the column with the pretend boolean is recognised
   as a 'checkable' column, we need to re-implement the flags() function
   and create a special case for the target column.
*/</span>
<span class="n">Qt</span><span class="o">::</span><span class="n">ItemFlags</span> <span class="n">EventTableModel</span><span class="o">::</span><span class="n">flags</span><span class="p">(</span><span class="k">const</span> <span class="n">QModelIndex</span> <span class="o">&amp;</span> <span class="n">index</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="c1">// Column 7 always records the mark variable (our boolean).</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">index</span><span class="p">.</span><span class="n">column</span><span class="p">()</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Make sure that this item is checkable.</span>
    <span class="k">return</span> <span class="n">QSqlTableModel</span><span class="o">::</span><span class="n">flags</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">ItemIsUserCheckable</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// Default behaviour in all other cases.</span>
  <span class="k">return</span> <span class="n">QSqlTableModel</span><span class="o">::</span><span class="n">flags</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>As mentioned previously, in the code snippet above we assume that our ‘pretend boolean’ is recorded in the seventh column of our sql table. We therefore check whether the current index being accessed exists in the seventh column. If yes, then we communicate to the program that the item at this index should be checkable by the user (we also make sure that we return all flags that are set by default). If no, then we revert to the default behaviour of the <code class="language-plaintext highlighter-rouge">QSqlTableModel::flags()</code> member function.</p> <p>Our sub-classed version of <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> still won’t understand how to handle our ‘pretend boolean’ properly. For that, we also need to re-implement the <code class="language-plaintext highlighter-rouge">data()</code> and <code class="language-plaintext highlighter-rouge">setData()</code> functions. The <a href="http://doc.qt.io/qt-5/qsqltablemodel.html#data" rel="external nofollow noopener" target="_blank">data()</a> and <a href="http://doc.qt.io/qt-5/qsqltablemodel.html#setData" rel="external nofollow noopener" target="_blank">setData()</a> are used to read data from, and write data to the sql table with which the QSqlTableModel is interfacing.</p> <p>We should keep in mind here that in the QSqlTableModel, data are stored under different ‘roles’ (see an overview of these roles <a href="http://doc.qt.io/qt-5/qt.html#ItemDataRole-enum" rel="external nofollow noopener" target="_blank">here</a>). For example, data stored under the <code class="language-plaintext highlighter-rouge">Qt::DisplayRole</code> are the data that are actually shown to the user in the <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a>, data stored under the <code class="language-plaintext highlighter-rouge">Qt::ToolTipRole</code> are the data that are shown when the user hovers his/her mouse cursor over an entry in the table, and data stored under the <code class="language-plaintext highlighter-rouge">Qt::EditRole</code> are the data that the user can manipulate in an editor. In the <a href="http://doc.qt.io/qt-5/qt.html#ItemDataRole-enum" rel="external nofollow noopener" target="_blank">list of roles</a> you will also find the <code class="language-plaintext highlighter-rouge">Qt::CheckStateRole</code>, and this is the role that we want to (re-)implement for our ‘pretend boolean’.</p> <p>Another thing we should keep in mind is that we don’t want <em>all</em> data in our sql table to be treated as ‘pretend booleans.’ We will want to keep the default behaviour of the <code class="language-plaintext highlighter-rouge">data()</code> and <code class="language-plaintext highlighter-rouge">setData()</code> functions in most cases. We can do that in the same way by as we did with the <code class="language-plaintext highlighter-rouge">flags()</code> function: We create a special case for the column that holds our <code class="language-plaintext highlighter-rouge">pretend boolean</code> variable, and we revert to the default implementation of <code class="language-plaintext highlighter-rouge">QSqlTableModel::data()</code> and <code class="language-plaintext highlighter-rouge">QSqlTableModel::SetData()</code> in all other cases.</p> <blockquote>Actually, in the example below we have one other exception, which is the special case in which the user is hovering the mouse cursor over a cell, which will cause the QSqlTableModel to return data under the Qt::ToolTipRole.</blockquote> <p>Let’s start with our <code class="language-plaintext highlighter-rouge">data()</code> function. See a snippet with its re-implemented version below. <strong>EDIT: The updated version below implements a suggestion made by Doug Forester in the comments. It is more efficient than what I originally came up with.</strong></p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">QVariant</span> <span class="n">EventTableModel</span><span class="o">::</span><span class="n">data</span><span class="p">(</span><span class="k">const</span> <span class="n">QModelIndex</span> <span class="o">&amp;</span><span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">role</span><span class="p">)</span> <span class="k">const</span> 
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">index</span><span class="p">.</span><span class="n">column</span><span class="p">()</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> 
    <span class="p">{</span> <span class="c1">// This is always the column with the boolean variable</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">::</span><span class="n">CheckStateRole</span><span class="p">)</span> 
	<span class="p">{</span> <span class="c1">// Only do the below when we are setting the checkbox.</span>
	  <span class="c1">// We can simply fetch the value from the current index</span>
	  <span class="kt">int</span> <span class="n">checked</span> <span class="o">=</span> <span class="n">QSqlTableModel</span><span class="o">::</span><span class="n">data</span><span class="p">(</span><span class="n">index</span><span class="p">).</span><span class="n">toInt</span><span class="p">();</span>
	  <span class="c1">// If checked == 1, then it evaluates to true in the if-statement below.</span>
	  <span class="c1">// If checked == 0, the statement evaluates to false.</span>
	  <span class="k">if</span> <span class="p">(</span><span class="n">checked</span><span class="p">)</span>
	    <span class="p">{</span>
	      <span class="k">return</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Checked</span><span class="p">;</span>
	    <span class="p">}</span>
	  <span class="k">else</span>
	    <span class="p">{</span>
	      <span class="k">return</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Unchecked</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>
      <span class="k">else</span> 
	<span class="p">{</span>
	  <span class="cm">/*
	    We return an empty variant in all other cases. This is to prevent, for example,
	    that we also see a '0' or '1' in the same column.
	  */</span>
	  <span class="k">return</span> <span class="n">QVariant</span><span class="p">();</span>
	<span class="p">}</span>
      <span class="c1">// Only do the below if we want to fetch a tool tip.</span>
    <span class="p">}</span>
  <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">::</span><span class="n">ToolTipRole</span><span class="p">)</span> 
    <span class="p">{</span>
      <span class="c1">// I just want the tool tip to show the data in the column.</span>
      <span class="k">const</span> <span class="n">QString</span> <span class="n">original</span> <span class="o">=</span> <span class="n">QSqlTableModel</span><span class="o">::</span><span class="n">data</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Qt</span><span class="o">::</span><span class="n">DisplayRole</span><span class="p">).</span><span class="n">toString</span><span class="p">();</span>
      <span class="n">QString</span> <span class="n">toolTip</span> <span class="o">=</span> <span class="n">breakString</span><span class="p">(</span><span class="n">original</span><span class="p">);</span> <span class="c1">// breakString() breaks the text in smaller lines.</span>
      <span class="k">return</span> <span class="n">toolTip</span><span class="p">;</span>
      <span class="c1">// I want to make sure that broken lines have a space between them.</span>
    <span class="p">}</span>
  <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">::</span><span class="n">DisplayRole</span><span class="p">)</span> 
    <span class="p">{</span>
      <span class="k">const</span> <span class="n">QString</span> <span class="n">original</span> <span class="o">=</span> <span class="n">QSqlTableModel</span><span class="o">::</span><span class="n">data</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Qt</span><span class="o">::</span><span class="n">DisplayRole</span><span class="p">).</span><span class="n">toString</span><span class="p">();</span>
      <span class="n">QString</span> <span class="n">shownText</span> <span class="o">=</span> <span class="n">fixBreakLines</span><span class="p">(</span><span class="n">original</span><span class="p">);</span>
      <span class="k">return</span> <span class="n">shownText</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="k">else</span> 
    <span class="p">{</span>
      <span class="cm">/* 
	 In all other cases, we want the default behaviour of this function. 
	 This can be done easily by returning the default version of the function,
	 rather than the re-implemented version we have here.
      */</span>
      <span class="k">return</span> <span class="n">QSqlTableModel</span><span class="o">::</span><span class="n">data</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">role</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="k">return</span> <span class="nf">QVariant</span><span class="p">();</span> <span class="c1">// This prevents a compiler warning.</span>
<span class="p">}</span></code></pre></figure> <p>So, the basic structure of this function is quite simple. We first check if the column of the sql table that is being accessed is the column with our <code class="language-plaintext highlighter-rouge">pretend boolean</code>. If yes, then we check whether the data are being accessed under the ‘Qt::CheckStateRole’. If the answer is yes again, we can fetch the current value of our ‘pretend boolean’ by accessing the data stored in the current index, and we store this value in <code class="language-plaintext highlighter-rouge">int checked</code>. The function will return <code class="language-plaintext highlighter-rouge">Qt::Checked</code> if <code class="language-plaintext highlighter-rouge">checked == 1</code>, and it will return <code class="language-plaintext highlighter-rouge">0</code> if <code class="language-plaintext highlighter-rouge">checked==0</code>.</p> <p>There are a few other situations that the re-implemented function handles. If we are accessing data in the column with our <code class="language-plaintext highlighter-rouge">pretend boolean</code>, but we are not accessing the data under the <code class="language-plaintext highlighter-rouge">Qt::CheckState</code> role, then the function simply returns an empty QVariant(), effectively returning nothing. I did this to make sure that the corresponding column in the <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> only shows a check box that visualises the current check state, and nothing else. If we are accessing data in any other column, the function first checks whether we are accessing data under the <code class="language-plaintext highlighter-rouge">Qt::ToolTipRole</code>. If yes, then we treat it as another special case, in which the user gets shown a tool tip that simply contains the visible contents of the cell currently being hovered over with the mouse cursor. If we are not accessing the data under the <code class="language-plaintext highlighter-rouge">Qt::ToolTipRole</code> (in all other cases), we just revert to the default implementation of the <code class="language-plaintext highlighter-rouge">QSqlTableModel::data()</code> function.</p> <p>If you have re-implemented the <code class="language-plaintext highlighter-rouge">data()</code> function in this way, then your <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> should already show check boxes in the corresponding column. So far, so good. However, there are still a few problems. One problem is that the check boxes are aligned to the extreme left of the column, which makes the table look ugly. We will deal with this later. A more urgent problem is that checking / unchecking the check boxes won’t actually do anything meaningful with the underlying data, unless we also re-implement the <code class="language-plaintext highlighter-rouge">setData()</code> function. Let’s do that next.</p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">bool</span> <span class="n">EventTableModel</span><span class="o">::</span><span class="n">setData</span><span class="p">(</span><span class="k">const</span> <span class="n">QModelIndex</span> <span class="o">&amp;</span> <span class="n">index</span><span class="p">,</span>
			      <span class="k">const</span> <span class="n">QVariant</span> <span class="o">&amp;</span> <span class="n">value</span><span class="p">,</span> <span class="kt">int</span> <span class="n">role</span><span class="p">)</span> 
<span class="p">{</span>
  <span class="cm">/* 
     Let's check whether the selected column is the column with our boolean variable
     (always column 7), and whether we are trying to set data under the 
     Qt::CheckStateRole.
  */</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">index</span><span class="p">.</span><span class="n">column</span><span class="p">()</span> <span class="o">==</span> <span class="mi">7</span> <span class="o">&amp;&amp;</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">::</span><span class="n">CheckStateRole</span><span class="p">)</span> 
    <span class="p">{</span>
      <span class="c1">// Writing the data when the check box is set to checked.</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Checked</span><span class="p">)</span> 
	<span class="p">{</span>
	  <span class="c1">// Let's write the new value</span>
	  <span class="k">return</span> <span class="n">setData</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	  <span class="c1">// Writing the data when the check box is set to unchecked</span>
	<span class="p">}</span>
      <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Unchecked</span><span class="p">)</span> 
	<span class="p">{</span>
	  <span class="c1">// Let's write the new value</span>
	  <span class="k">return</span> <span class="n">setData</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
    <span class="p">}</span>
  <span class="c1">// In all other situations revert to default behaviour.</span>
  <span class="k">return</span> <span class="n">QSqlTableModel</span><span class="o">::</span><span class="n">setData</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">role</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>We have a similar kind of check to the one we had with the <code class="language-plaintext highlighter-rouge">data()</code> function: We check whether thes column we are writing to is the column that contains our <code class="language-plaintext highlighter-rouge">pretend boolean</code> variable. In this case, we check at the same time whether we are trying to write data under the <code class="language-plaintext highlighter-rouge">Qt::CheckStateRole</code>. If yes, we write either a <code class="language-plaintext highlighter-rouge">1</code> or a <code class="language-plaintext highlighter-rouge">0</code> to the corresponding index, depending on what value was passed to the function. In all other situations we simply refer to the default implementation of the <code class="language-plaintext highlighter-rouge">QSqlTableModel::setData()</code> function.</p> <p>After re-implementing the <code class="language-plaintext highlighter-rouge">data()</code> function this way, checking / unchecking the check boxes in our <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> will actually do something meaningful with the data in the underlying sql table.</p> <p>If you don’t care about the alignment of the check boxes in their corresponding column of the <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a>, then you’re done. However, I think that the table looks much nicer with the check boxes aligned to the centre of their column. How to achieve this is what I will discuss next.</p> <h2 id="styling-the-column-with-the-check-boxes">Styling the column with the check boxes</h2> <p>It turns out that the only way to align the check boxes to the centre of their column is to use a <a href="http://doc.qt.io/qt-5/qstyleditemdelegate.html" rel="external nofollow noopener" target="_blank">QStyledItemDelegate</a>. Well, there is <a href="https://falsinsoft.blogspot.co.uk/2013/11/qtablewidget-center-checkbox-inside-cell.html" rel="external nofollow noopener" target="_blank">another approach that uses layouts</a>, but that only works if you (1) manually append another column to your <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a>, (2) explicitly create <code class="language-plaintext highlighter-rouge">QCheckBox</code> objects, (3) assign these to a parent <code class="language-plaintext highlighter-rouge">QWidget</code> object, (4) to which you then apply a centralised layout. This is quite an expensive procedure that can significantly reduce the performance of your program, and it only works well if you don’t update your <a href="https://doc.qt.io/qt-5.10/qsqltablemodel.html" rel="external nofollow noopener" target="_blank">QSqlTableModel</a> frequently.</p> <blockquote> This is because every time that you update your QSqlTableModel the manually appended column will disappear. You can of course solve this by writing a function that creates the extra column, and fills it with your manually created check boxes, and run this function whenever the QSqlTableModel's select() function gets called. However, this will slow down your program quite a bit, and I also found some other drawbacks to this approach that are a bit outside the scope of this discussion. </blockquote> <p>The approach that uses a <a href="http://doc.qt.io/qt-5/qstyleditemdelegate.html" rel="external nofollow noopener" target="_blank">QStyledItemDelegate</a> is actually what is recommended in <a href="http://www.qtcentre.org/threads/12008-QSqlTableModel-and-checkboxes-with-SQLite-database" rel="external nofollow noopener" target="_blank">Qt’s FAQ</a> section. An example code snippet is offered there as well, although it is a bit outdated (it uses some functions that were deprecated in Qt5). Essentially, what you are required to do is to create your own sub-class of <a href="http://doc.qt.io/qt-5/qstyleditemdelegate.html" rel="external nofollow noopener" target="_blank">QStyledItemDelegate</a>, and re-implement its <code class="language-plaintext highlighter-rouge">paint()</code> and <code class="language-plaintext highlighter-rouge">editorEvent()</code> functions. The <code class="language-plaintext highlighter-rouge">paint()</code> function determines how the check box is visualised to the user, and the <code class="language-plaintext highlighter-rouge">editorEvent()</code> function determines how the user can interact with the check box.</p> <p>I included the snippet with my slightly adapted version of the re-implemented functions below. I am not going to pretend that I grasp every detail of what happens in these functions. I mostly replaced some of the deprecated functions in the example offered in <a href="http://www.qtcentre.org/threads/12008-QSqlTableModel-and-checkboxes-with-SQLite-database" rel="external nofollow noopener" target="_blank">Qt’s FAQ</a>.</p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cm">/* 
   This is a slightly adapted version of the example that is provided here:
   https://wiki.qt.io/Technical_FAQ#How_can_I_align_the_checkboxes_in_a_view.3F
*/</span>

<span class="kt">void</span> <span class="n">CheckBoxDelegate</span><span class="o">::</span><span class="n">paint</span> <span class="p">(</span><span class="n">QPainter</span> <span class="o">*</span> <span class="n">painter</span><span class="p">,</span> <span class="k">const</span> <span class="n">QStyleOptionViewItem</span> <span class="o">&amp;</span> <span class="n">option</span><span class="p">,</span>
	    <span class="k">const</span> <span class="n">QModelIndex</span> <span class="o">&amp;</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="n">QStyleOptionViewItem</span> <span class="n">viewItemOption</span><span class="p">(</span><span class="n">option</span><span class="p">);</span>
  <span class="c1">// Only do this if we are accessing the column with boolean variables.</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">index</span><span class="p">.</span><span class="n">column</span><span class="p">()</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// This basically changes the rectangle in which the check box is drawn.</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">textMargin</span> <span class="o">=</span> <span class="n">QApplication</span><span class="o">::</span><span class="n">style</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">pixelMetric</span><span class="p">(</span><span class="n">QStyle</span><span class="o">::</span><span class="n">PM_FocusFrameHMargin</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">QRect</span> <span class="n">newRect</span> <span class="o">=</span> <span class="n">QStyle</span><span class="o">::</span><span class="n">alignedRect</span><span class="p">(</span><span class="n">option</span><span class="p">.</span><span class="n">direction</span><span class="p">,</span> <span class="n">Qt</span><span class="o">::</span><span class="n">AlignCenter</span><span class="p">,</span>
					<span class="n">QSize</span><span class="p">(</span><span class="n">option</span><span class="p">.</span><span class="n">decorationSize</span><span class="p">.</span><span class="n">width</span><span class="p">()</span> <span class="o">+</span>
					      <span class="mi">5</span><span class="p">,</span><span class="n">option</span><span class="p">.</span><span class="n">decorationSize</span><span class="p">.</span><span class="n">height</span><span class="p">()),</span>
					<span class="n">QRect</span><span class="p">(</span><span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="n">textMargin</span><span class="p">,</span> <span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">y</span><span class="p">(),</span>
					      <span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span>
					      <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">textMargin</span><span class="p">),</span> <span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">height</span><span class="p">()));</span>
    <span class="n">viewItemOption</span><span class="p">.</span><span class="n">rect</span> <span class="o">=</span> <span class="n">newRect</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// Draw the check box using the new rectangle.</span>
  <span class="n">QStyledItemDelegate</span><span class="o">::</span><span class="n">paint</span><span class="p">(</span><span class="n">painter</span><span class="p">,</span> <span class="n">viewItemOption</span><span class="p">,</span> <span class="n">index</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="n">CheckBoxDelegate</span><span class="o">::</span><span class="n">editorEvent</span><span class="p">(</span><span class="n">QEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">,</span> <span class="n">QAbstractItemModel</span> <span class="o">*</span><span class="n">model</span><span class="p">,</span>
			 <span class="k">const</span> <span class="n">QStyleOptionViewItem</span> <span class="o">&amp;</span><span class="n">option</span><span class="p">,</span>
			 <span class="k">const</span> <span class="n">QModelIndex</span> <span class="o">&amp;</span><span class="n">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Q_ASSERT</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
  <span class="n">Q_ASSERT</span><span class="p">(</span><span class="n">model</span><span class="p">);</span>

  <span class="c1">// make sure that the item is checkable</span>
  <span class="n">Qt</span><span class="o">::</span><span class="n">ItemFlags</span> <span class="n">flags</span> <span class="o">=</span> <span class="n">model</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">::</span><span class="n">ItemIsUserCheckable</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">::</span><span class="n">ItemIsEnabled</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// make sure that we have a check state</span>
  <span class="n">QVariant</span> <span class="n">value</span> <span class="o">=</span> <span class="n">index</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">CheckStateRole</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">value</span><span class="p">.</span><span class="n">isValid</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// make sure that we have the right event type</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">::</span><span class="n">MouseButtonRelease</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">textMargin</span> <span class="o">=</span> <span class="n">QApplication</span><span class="o">::</span><span class="n">style</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">pixelMetric</span><span class="p">(</span><span class="n">QStyle</span><span class="o">::</span><span class="n">PM_FocusFrameHMargin</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">QRect</span> <span class="n">checkRect</span> <span class="o">=</span> <span class="n">QStyle</span><span class="o">::</span><span class="n">alignedRect</span><span class="p">(</span><span class="n">option</span><span class="p">.</span><span class="n">direction</span><span class="p">,</span> <span class="n">Qt</span><span class="o">::</span><span class="n">AlignCenter</span><span class="p">,</span>
					  <span class="n">option</span><span class="p">.</span><span class="n">decorationSize</span><span class="p">,</span>
					  <span class="n">QRect</span><span class="p">(</span><span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">textMargin</span><span class="p">),</span> <span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">y</span><span class="p">(),</span>
						<span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">textMargin</span><span class="p">),</span>
						<span class="n">option</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">height</span><span class="p">()));</span>
    <span class="c1">// We handle the mouse event...</span>
    <span class="n">QMouseEvent</span> <span class="o">*</span><span class="n">mEvent</span> <span class="o">=</span> <span class="p">(</span><span class="n">QMouseEvent</span><span class="o">*</span><span class="p">)</span> <span class="n">event</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">checkRect</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mEvent</span><span class="o">-&gt;</span><span class="n">pos</span><span class="p">()))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// as well as the key press event.</span>
  <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">event</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">::</span><span class="n">KeyPress</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">QKeyEvent</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">()</span> <span class="o">!=</span>
	<span class="n">Qt</span><span class="o">::</span><span class="n">Key_Space</span><span class="o">&amp;&amp;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">QKeyEvent</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">()</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Key_Select</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// Determine the new check state</span>
  <span class="n">Qt</span><span class="o">::</span><span class="n">CheckState</span> <span class="n">state</span> <span class="o">=</span> <span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Qt</span><span class="o">::</span><span class="n">CheckState</span><span class="o">&gt;</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">toInt</span><span class="p">())</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Checked</span>
			  <span class="o">?</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Unchecked</span> <span class="o">:</span> <span class="n">Qt</span><span class="o">::</span><span class="n">Checked</span><span class="p">);</span>
  <span class="c1">// And set the new check state by calling the model's setData() function.</span>
  <span class="k">return</span> <span class="n">model</span><span class="o">-&gt;</span><span class="n">setData</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">Qt</span><span class="o">::</span><span class="n">CheckStateRole</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>The re-implemented version of the <code class="language-plaintext highlighter-rouge">paint()</code> function basically just changes the position at which the check box is drawn, by changing the rectangle within which the paint event takes place, and then calling the default version of the <code class="language-plaintext highlighter-rouge">paint()</code> function with an option parameter that includes the altered rectangle.</p> <p>The re-implemented version of the <code class="language-plaintext highlighter-rouge">editorEvent()</code> function handles various events through which the user might manipulate the current state of the check box. If an event meets the required conditions (e.g., a <code class="language-plaintext highlighter-rouge">QEvent::MouseButtonRelease</code> took place within the rectangle where the check box is drawn), then we call the <code class="language-plaintext highlighter-rouge">setData()</code> function (the one we re-implemented earlier) with the appropriate parameters.</p> <p>There is actually one other thing we need to do if we want our <a href="http://doc.qt.io/qt-5/qstyleditemdelegate.html" rel="external nofollow noopener" target="_blank">QStyledItemDelegate</a> to work. We need to tell our <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> object to use the delegate in its seventh column. In my case, the <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> object is named <code class="language-plaintext highlighter-rouge">tableView</code>, and the sub-classed version of the <a href="http://doc.qt.io/qt-5/qstyleditemdelegate.html" rel="external nofollow noopener" target="_blank">QStyledItemDelegate</a> I created is named <code class="language-plaintext highlighter-rouge">CheckBoxDelegate</code>. I set <code class="language-plaintext highlighter-rouge">tableView</code> to use the <code class="language-plaintext highlighter-rouge">CheckBoxDelegate</code> by using the following function:</p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">tableView</span><span class="o">-&gt;</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="k">new</span> <span class="nf">CheckBoxDelegate</span><span class="p">(</span><span class="n">tableView</span><span class="p">));</span></code></pre></figure> <p>And that should do the trick! Now you should have a <a href="http://doc.qt.io/archives/qt-4.8/qtableview.html" rel="external nofollow noopener" target="_blank">QTableView</a> with a nice-looking column of check boxes through which the user can interact with ‘pretend boolean’ variables in your sql database.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/relationships-in-qsopra/">Relationships in Q-SoPrA</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/attributes-in-qsopra/">Attributes in Q-SoPrA</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/writing-academic-papers-with-org-mode/">Writing academic papers with org-mode</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2017/a-better-csv-parser/">A better csv parser</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2017/getting-started-with-qsopra/">Getting started with Q-SoPrA</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Wouter A. H. Spekkink. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>